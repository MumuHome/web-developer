<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script charset="utf-8" type="text/javascript" src="../new-text/CommonUtil.js"></script>
    <script charset="utf-8" type="text/javascript">
        // 组合模式
        /* 场景模式
        * 公司
        *       开发部门
        *               张1
        *               张4
        *       销售部门
        *               张2
        *               张3
        *
        *  实际的任务只能由具体的人来实施
        * */
        var Org = function (name) {
            this.name = name;
            this.depts = [];
        };
        Org.prototype = {
            constructor : Org ,
            addDepts : function (child) {
                this.depts.push(child);
                return this;
            },
            getDepts : function () {
                return this.depts;
            }
        }

        var Dept = function (name) {
            this.name = name;
            this.persons = [];
        };
        Dept.prototype = {
            constructor : Dept ,
            addPersons : function (child) {
                this.persons.push(child);
                return this;
            },
            getPersons : function () {
                return this.persons;
            }
        }

        var Person = function (name) {
            this.name = name;
        };
        Person.prototype = {
            constructor : Person ,
            hardworking : function () {
                document.write(this.name + '努力工作')
            },
            sleeping:function () {
                document.write(this.name + '努力睡觉')
            }
        }

        var p1 = new Person('张1');
        var p2 = new Person('张2');
        var p3 = new Person('张3');
        var p4 = new Person('张4');

        var dept1 = new Dept('开发部门');
        dept1.addPersons(p1).addPersons(p4);
        var dept2 = new Dept('销售部门');
        dept2.addPersons(p2).addPersons(p3);

        var org = new Org('慕兮大人的公司');
        org.addDepts(dept1).addDepts(dept2);

        // 需求：具体的让一个人去努力工作
        for ( var i = 0, depts = org.getDepts(); i<depts.length ; i++ ){
            for ( var j = 0, persons = depts[i].getPersons() ; j<persons.length ; j++ ){
                if ( persons[j].name === '张3' ){
                    persons[j].hardworking();
                }
            }
        }

    </script>
</head>
<body>

</body>
</html>