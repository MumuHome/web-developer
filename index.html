<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>文件API</title>
    <link rel="stylesheet" href="bootstrap.min.css">
</head>
<body>
<form>
    <!--对于表单里的input来说，可以直接通过name属性找到它-->
    <!--document.forms[0].input_file-->
    <input class="hidden" type="file" name="input_file" id="input" multiple>
    <br>
    <!--伪造一个选择文件按钮-->
    <input type="button" value="选择文件" id="btn_sele" class="btn btn-info">
    <!--<input type="button" value="读取文件列表" id="btn_read" class="btn btn-primary">-->
    <ul class="list-group" id="list_group">
    </ul>
</form>
<script>
    (function () {
        var inputFile = document.querySelector('#input');
//        var btnRead = document.querySelector('#btn_read');
        var group = document.querySelector('#list_group');
        var btnSele = document.querySelector('#btn_sele');
//        点击过后读取文件列表
//        btnRead.addEventListener('click',function () {
//
//            var files = inputFile.files;
//            for ( var i = 0 ; i <files.length ; i++ )
//            {
////                group.removeChild(li);
//                var li = document.createElement('li');
//                li.setAttribute('class','list-group-item');
////                创建li的子节点，标题为文件名，内容为文件修改日期
//                li.innerHTML = '<h5 class="list-group-item-heading">'+files[i].name+'</h5><p class="list-group-item-text">'+files[i].lastModifiedDate.toLocaleDateString()+' '+files[i].lastModifiedDate.toLocaleTimeString()+' '+parseInt(files[i].size/1024)+'KB</p>';
//                group.appendChild(li);
//            }
//        });

//        选择完成后直接完成修改
        btnSele.addEventListener('click',function () {
//            在按钮点击时调用input的点击
            inputFile.click();
        })
        inputFile.addEventListener('change',function () {
            var files = inputFile.files;
            for ( var i = 0 ; i <files.length ; i++ )
            {
//                group.removeChild(li);
                var li = document.createElement('li');
                li.setAttribute('class','list-group-item');
//                创建li的子节点，标题为文件名，内容为文件修改日期
                li.innerHTML = '<h5 class="list-group-item-heading">'+files[i].name+'</h5><p class="list-group-item-text">'+files[i].lastModifiedDate.toLocaleDateString()+' '+files[i].lastModifiedDate.toLocaleTimeString()+' '+parseInt(files[i].size/1024)+'KB</p>';
                group.appendChild(li);
            }

        })
    })()
</script>
</body>
</html>
